<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>

  <!-- Google Tag Manager Data Layer - Initialize IMMEDIATELY before other scripts -->
  <script>
    // Initialize data layer array
    window.dataLayer = window.dataLayer || [];

    // Push initial page load data
    window.dataLayer.push({
      page: {
        pageType: '404',
        pageName: 'Error | Page Not Found',
        pageCategory: 'error',
        url: window.location.href,
        referrer: document.referrer || null,
        language: navigator.language?.split('-')[0] || 'en',
        country: 'US',
        currency: 'USD'
      },
      user: {
        loginStatus: 'logged_out',
        userType: 'guest'
      },
      device: {
        deviceType: /Mobile|Android|iPhone/i.test(navigator.userAgent) ? 'mobile' : 'desktop',
        os: /Windows/i.test(navigator.userAgent) ? 'Windows' :
          /Mac OS/i.test(navigator.userAgent) ? 'MacOS' :
            /Android/i.test(navigator.userAgent) ? 'Android' :
              /iOS|iPhone/i.test(navigator.userAgent) ? 'iOS' : 'Unknown',
        browser: /Chrome/i.test(navigator.userAgent) && !/Edge/i.test(navigator.userAgent) ? 'Chrome' :
          /Safari/i.test(navigator.userAgent) && !/Chrome/i.test(navigator.userAgent) ? 'Safari' :
            /Firefox/i.test(navigator.userAgent) ? 'Firefox' :
              /Edge/i.test(navigator.userAgent) ? 'Edge' : 'Unknown'
      }
    });
  </script>

  <!-- Adobe Launch - Loaded after dataLayer initialization -->
  <script src="https://assets.adobedtm.com/e78d80a30a77/c6e17ff1045a/launch-b1fbebf85d59-development.min.js" async></script>
  <script type="text/javascript">
    // Selective SPA Redirect for GitHub Pages
    // Only redirect /shop and /product routes to SPA
    // Other routes get normal 404 behavior

    var pathSegmentsToKeep = 1; // Keep /Ganesh-PrimeStore
    var l = window.location;
    var path = l.pathname;

    // Extract the route part (after /Ganesh-PrimeStore)
    var routePath = path.replace('/Ganesh-PrimeStore', '').replace(/^\/+/, '/');

    // Define which routes should use SPA behavior
    var spaRoutes = ['/shop', '/cart', '/checkout', '/wishlist', '/signin', '/order-confirmation'];
    var isSpaRoute = spaRoutes.some(function (r) { return routePath.startsWith(r); });
    var isProductRoute = routePath.includes('/p-'); // Product detail pages like /product-name/p-123

    if (isSpaRoute || isProductRoute) {
      // Redirect to index with query param for SPA to handle
      l.replace(
        l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
        l.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/') + '/?p=/' +
        l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/').replace(/&/g, '~and~') +
        (l.search ? '&q=' + l.search.slice(1).replace(/&/g, '~and~') : '') +
        l.hash
      );
    } else {
      // Show 404 page for non-SPA routes
      document.body.innerHTML = '<div style="text-align: center; padding: 100px 20px; font-family: sans-serif;"><h1 style="font-size: 72px; margin-bottom: 20px;">404</h1><h2>Page Not Found</h2><p style="color: #666; margin: 20px 0;">The page you are looking for doesnt exist.</p><a href="/Ganesh-PrimeStore/" style="color: #F5C563; text-decoration: none; font-weight: bold;">‚Üê Go back Home</a></div>';
    }
  </script>
</head>

<body>
  Redirecting...
</body>

</html>