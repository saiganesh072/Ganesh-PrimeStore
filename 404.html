<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Redirect to the main page with the current path as a query parameter
    // This query parameter will be parsed by our SPA logic in main.js to restore the route
    var segmentCount = 1; // Set this to the number of segments in your repository name (e.g., 1 for /repo/)
    var l = window.location;
    l.replace(
      l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
      l.pathname.split('/').slice(0, 1 + segmentCount).join('/') + '/?p=' +
      l.pathname.slice(1).split('/').slice(segmentCount).join('/').replace(/&/g, '~and~') +
      (l.search ? '&q=' + l.search.slice(1).replace(/&/g, '~and~') : '') +
      l.hash
    );
  </script>
</head>

<body>
  Redirecting...
</body>

</html>